create database online_shopping_system;

use online_shopping_system;

create table Customer(
	CustID VARCHAR(6) NOT NULL,
	CustName VARCHAR(30) NOT NULL,
	CustAddress VARCHAR(30),
	CustEmail VARCHAR(30),
	CustPass VARCHAR(30),	
	CONSTRAINT PRIMARY KEY (CustID)
);

CREATE TABLE Supplier(
	SupID VARCHAR(6) NOT NULL,
	SupName VARCHAR(30) NOT NULL,
	SupAddress VARCHAR(30),
	SupEmail VARCHAR(30),	
	CONSTRAINT PRIMARY KEY (SupID)
);

CREATE TABLE Category(
	CateID VARCHAR(6) NOT NULL,
	CateName VARCHAR(30) NOT NULL,
	SupAddress VARCHAR(30),
	CONSTRAINT PRIMARY KEY (CateID)
);

CREATE TABLE Orders(
	OrderID VARCHAR(6) NOT NULL,
	OrderDate DATE,
	CustID VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (OrderID),
	CONSTRAINT FOREIGN KEY(CustID) REFERENCES Customer(CustID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE OrderDetail(
	OrderID VARCHAR(6) NOT NULL,
	ItemID VARCHAR(6) NOT NULL,
	OrderQTY INT(11) NOT NULL,
	Discount INT(2),
	CONSTRAINT PRIMARY KEY (OrderID,ItemID),
	CONSTRAINT FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY (ItemID) REFERENCES Item(ItemID)
	ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE Item(
	ItemID VARCHAR(6) NOT NULL,
	ItemName VARCHAR(30) NOT NULL,
	Description VARCHAR(50) NOT NULL,
	UnitPrice DECIMAL(6,2) NOT NULL,
    	SupID VARCHAR(6) NOT NULL,
   	CateID VARCHAR(6) NOT NULL,
	CONSTRAINT PRIMARY KEY (ItemID),
	CONSTRAINT FOREIGN KEY (SupID) REFERENCES Supplier(SupID)
	ON UPDATE CASCADE ON DELETE CASCADE,
	CONSTRAINT FOREIGN KEY (CateID) REFERENCES Category(CateID)
	ON UPDATE CASCADE ON DELETE CASCADE
);




	